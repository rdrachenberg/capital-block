{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/ryan/Desktop/Kingsland-University/Homework Files/Module-6-Homework/capital-block/client/src/components/Login/Login.js\";\nimport React, { Component } from 'react';\nimport { MDBContainer, MDBBtn, MDBModal, MDBModalBody, MDBModalHeader, MDBInput, MDBModalFooter, MDBNavLink } from 'mdbreact';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport '../../index.css';\nimport API from '../../utils/API';\nimport Cookies from 'universal-cookie';\nconst cookies = new Cookies();\n\nclass LoginPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = nr => () => {\n      let modalNumber = 'modal' + nr;\n      this.setState({\n        [modalNumber]: !this.state[modalNumber],\n        toHome: false,\n        loggedIn: false\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      e.target.className += \" was-validated\";\n\n      if (this.state.email && this.state.password) {\n        API.login({\n          email: this.state.email,\n          password: this.state.password\n        }).then(res => {\n          console.log(res);\n          console.log('this is the res +++++');\n\n          if (res.status === 401) {\n            console.log('The response 401 was hit');\n            document.getElementById('#email').className.add('invalid');\n          } // console.log(res);\n          // console.log(this.state.user);\n\n\n          const token = res.data.token;\n          const name = res.data.name;\n          cookies.set('x-auth-token', token, {\n            path: '/'\n          });\n          cookies.set('name', name, {\n            path: '/'\n          });\n          console.log(res.data);\n          console.log('Login RES.DATA ^^^^^^^^');\n          this.setState({\n            toHome: true,\n            loggedIn: document.cookie.indexOf(\"x-auth-token\") !== -1,\n            user: res.data\n          });\n          this.props.history.replace('/');\n        }).catch(err => console.log(err));\n      }\n\n      console.log('ðŸŒŽ  ==> loggin logged!!!!  ðŸŒŽ');\n    };\n\n    this.state = {\n      modal1: false,\n      toHome: false,\n      loggedIn: false,\n      user: '',\n      email: '',\n      password: '',\n      error: {\n        email: '',\n        password: ''\n      }\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.toggle = this.toggle.bind(this);\n  }\n\n  render() {\n    // // console.log(this.state);\n    if (this.state.toHome === true) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/about\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 20\n      }, this);\n    }\n\n    ; // if(this.state.loggedIn === true){\n    //     createContext(this.state.loggedIn===true);\n    // }\n\n    return /*#__PURE__*/_jsxDEV(MDBContainer, {\n      children: [/*#__PURE__*/_jsxDEV(MDBNavLink, {\n        to: \"/\",\n        \"data-toggle\": \"modal\",\n        onClick: this.toggle(1),\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(MDBModal, {\n        isOpen: this.state.modal1,\n        toggle: this.toggle(1),\n        children: [/*#__PURE__*/_jsxDEV(MDBModalHeader, {\n          className: \"text-center\",\n          titleClass: \"w-100 font-weight-bold\",\n          toggle: this.toggle(1),\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(MDBModalBody, {\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"needs-validation\",\n            onSubmit: this.handleSubmit,\n            noValidate: true,\n            id: \"login-form\",\n            children: [/*#__PURE__*/_jsxDEV(MDBInput, {\n              id: \"email\",\n              label: \"Type your email\",\n              icon: \"envelope\",\n              group: true,\n              type: \"text\",\n              error: \"wrong\",\n              success: \"right\",\n              value: this.state.email,\n              onChange: this.handleChange,\n              autoComplete: \"email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"valid-feedback\",\n              children: \"Looks good!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-feedback\",\n              children: \"Please provide a valid city.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n              id: \"password\",\n              label: \"Type your password\",\n              icon: \"lock\",\n              group: true,\n              type: \"password\",\n              value: this.state.password,\n              onChange: this.handleChange,\n              autoComplete: \"password\",\n              className: \"form-control\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(MDBModalFooter, {\n          className: \"justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(MDBBtn, {\n            onClick: this.handleSubmit,\n            type: \"submit\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(LoginPage); // console.log(this.props.history);\n// console.log(cookies.get('x-auth-token'));\n// console.log(this.props);\n// res.redirect('http://localhost:3000');\n// const current = props.location.pathname;\n// this.props.history.replace('/');\n// setTimeout(() => {\n//     this.props.history.replace(current);\n// });\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/ryan/Desktop/Kingsland-University/Homework Files/Module-6-Homework/capital-block/client/src/components/Login/Login.js"],"names":["React","Component","MDBContainer","MDBBtn","MDBModal","MDBModalBody","MDBModalHeader","MDBInput","MDBModalFooter","MDBNavLink","Redirect","withRouter","API","Cookies","cookies","LoginPage","constructor","props","toggle","nr","modalNumber","setState","state","toHome","loggedIn","handleChange","e","target","id","value","handleSubmit","preventDefault","className","email","password","login","then","res","console","log","status","document","getElementById","add","token","data","name","set","path","cookie","indexOf","user","history","replace","catch","err","modal1","error","bind","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { MDBContainer, MDBBtn, MDBModal, MDBModalBody, MDBModalHeader, MDBInput, MDBModalFooter, MDBNavLink } from 'mdbreact';\nimport { Redirect, withRouter} from 'react-router-dom';\nimport '../../index.css';\nimport API from '../../utils/API';\nimport Cookies from 'universal-cookie';\n\nconst cookies = new Cookies();\n\nclass LoginPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            modal1: false,\n            toHome: false,\n            loggedIn: false,\n            user: '',\n            email: '',\n            password: '',\n            error: {\n                email: '',\n                password: '',\n            }\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.toggle = this.toggle.bind(this);\n        \n        \n    }\n    \n    toggle = nr => () => {\n        let modalNumber = 'modal' + nr\n        this.setState({\n            [modalNumber]: !this.state[modalNumber],\n            toHome: false,\n            loggedIn: false,\n        });\n        \n    }\n        \n    // componentDidMount()Â {\n    //     if(document.cookie.indexOf(\"x-auth-token\") !== -1){\n    //         this.props.history.push(\"/404\");\n    //     } else {\n    //         this.props.history.push('/');\n            \n    //     }\n    // }\n\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id] : e.target.value,\n        });\n    }\n\n\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        e.target.className += \" was-validated\";\n        \n        if(this.state.email && this.state.password){\n            \n            API.login({\n                email: this.state.email,\n                password: this.state.password,\n\n            }).then(res => {\n                console.log(res);\n                console.log('this is the res +++++')\n                if(res.status === 401){\n                    console.log('The response 401 was hit');\n                    document.getElementById('#email').className.add('invalid');\n                }\n                // console.log(res);\n                \n                // console.log(this.state.user);\n                const token = res.data.token;\n                const name = res.data.name;\n                cookies.set('x-auth-token', token, { path: '/'});\n                cookies.set('name', name, { path: '/'});\n                console.log(res.data);\n                console.log('Login RES.DATA ^^^^^^^^')\n                \n\n\n                this.setState({\n                    toHome: true,\n                    loggedIn: (document.cookie.indexOf(\"x-auth-token\") !== -1),\n                    user: res.data\n                })\n                this.props.history.replace('/');\n\n            })\n            .catch(err => console.log(err));\n        }\n        \n        console.log('ðŸŒŽ  ==> loggin logged!!!!  ðŸŒŽ');\n    }\n\n    render() {\n        // // console.log(this.state);\n        if(this.state.toHome === true){\n            return(<Redirect to='/about' />)\n        };\n\n        // if(this.state.loggedIn === true){\n        //     createContext(this.state.loggedIn===true);\n        // }\n        return (\n            <MDBContainer>\n            <MDBNavLink to=\"/\" data-toggle='modal' onClick={this.toggle(1)}>Login</MDBNavLink>\n                <MDBModal isOpen={this.state.modal1} toggle={this.toggle(1)}>\n                    <MDBModalHeader className=\"text-center\" titleClass=\"w-100 font-weight-bold\" toggle={this.toggle(1)}>Sign in</MDBModalHeader>\n                    <MDBModalBody>\n                    <form className=\"needs-validation\" onSubmit={this.handleSubmit} noValidate id='login-form'>\n                        <MDBInput  id='email' label=\"Type your email\" icon=\"envelope\" group type=\"text\"  error=\"wrong\" success=\"right\" value={this.state.email} onChange={this.handleChange} autoComplete='email'/>\n                        <div className=\"valid-feedback\">Looks good!</div>\n                        <div className=\"invalid-feedback\">Please provide a valid city.</div>\n                        <MDBInput id='password' label=\"Type your password\" icon=\"lock\" group type=\"password\" value={this.state.password} onChange={this.handleChange} autoComplete='password' className=\"form-control\"/>\n                    </form>\n                    </MDBModalBody>\n                    <MDBModalFooter className=\"justify-content-center\">\n                    <MDBBtn onClick={this.handleSubmit} type='submit'>Login</MDBBtn>\n                    </MDBModalFooter>\n                </MDBModal>\n            </MDBContainer>\n        );\n    }\n}\n\nexport default withRouter(LoginPage);\n\n// console.log(this.props.history);\n                // console.log(cookies.get('x-auth-token'));\n                // console.log(this.props);\n                // res.redirect('http://localhost:3000');\n                // const current = props.location.pathname;\n                // this.props.history.replace('/');\n                // setTimeout(() => {\n                //     this.props.history.replace(current);\n                // });"]},"metadata":{},"sourceType":"module"}